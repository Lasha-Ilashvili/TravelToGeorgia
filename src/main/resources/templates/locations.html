<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Travel To Georgia - Sightseeing Locations</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>
<body class="bg-gray-100">
<header class="bg-blue-600 text-white p-4 sticky top-0 z-10">
    <div class="container mx-auto">
        <div class="flex justify-between items-center mb-4">
            <h1 class="text-2xl font-bold">Travel To Georgia - Sightseeing Locations</h1>
        </div>
        <div class="flex flex-col md:flex-row justify-between items-center">
            <div class="w-full md:w-1/2 mb-4 md:mb-0">
                <form th:action="@{/locations/by_search_param}" method="get" class="flex">
                    <input type="search" id="search" name="param" placeholder="Search for locations..."
                           class="w-full p-2 rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-400">
                    <button type="submit"
                            class="bg-blue-700 text-white p-2 rounded-r-md hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-400">
                        Search
                    </button>
                </form>
            </div>
            <div class="flex space-x-2">
                <div x-data="{ open: false, seasons: ['Summer', 'Winter'] }" class="relative">
                    <button @click="open = !open"
                            class="bg-blue-500 text-white p-2 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400">
                        Filter by Season
                    </button>
                    <div x-show="open" @click.away="open = false"
                         class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-20">
                        <template x-for="season in seasons">
                            <a :href="'/locations/by_season/' + season.toLowerCase()" x-text="season"
                               class="block px-4 py-2 text-gray-800 hover:bg-blue-100"></a>
                        </template>
                    </div>
                </div>
                <div x-data="{ open: false, regions: [] }"
                     x-init="fetch('/locations/api/regions').then(response => response.json()).then(data => regions = data)"
                     class="relative">
                    <button @click="open = !open"
                            class="bg-blue-500 text-white p-2 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400">
                        Filter by Region
                    </button>
                    <div x-show="open" @click.away="open = false"
                         class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-20">
                        <template x-for="region in regions">
                            <a :href="'/locations/by_region/' + region.toLowerCase()" x-text="region"
                               class="block px-4 py-2 text-gray-800 hover:bg-blue-100"></a>
                        </template>
                    </div>
                </div>
                <a th:href="@{/locations}"
                   class="bg-red-500 text-white p-2 rounded-md hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-400">Reset</a>
            </div>
        </div>
</header>

<main class="container mx-auto mt-8">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        <div th:each="location : ${locations}"
             class="bg-locations rounded-lg shadow-md overflow-hidden transition-transform duration-300 hover:transform hover:scale-105">
            <a th:href="@{/locations/{locationId}(locationId=${location.id})}" class="block">
                <img th:src="${location.imageUrl}" alt="Location Image" class="w-full h-48 object-cover">
                <div class="p-4">
                    <h2 th:text="${location.name}" class="text-xl font-semibold mb-2">Location Name</h2>
                    <p th:text="${#strings.abbreviate(location.description, 100)}" class="text-gray-600">
                        Description...</p>
                    <div class="mt-4">
                        <span th:text="${location.season}"
                              class="inline-block bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm mr-2">Season</span>
                        <span th:text="${location.region}"
                              class="inline-block bg-green-100 text-green-800 px-2 py-1 rounded-full text-sm">Region</span>
                    </div>
                </div>
            </a>
        </div>
    </div>
</main>
<footer class="bg-gray-800 text-white py-4 mt-12">
    <div class="container mx-auto text-center">
        <p>&copy; 2024 Travel To Georgia. All rights reserved.</p>
    </div>
</footer>
</body>
</html>